<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160422" />
    <meta http-equiv="Content-Language" content="en" />
    <title>EHRI Backend &#x2013; Using the Web Service</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                                                                                        <img src="https://ehri-project.eu/sites/all/themes/ehri_new/images/logo.png"  alt="EHRI Backend"/>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2016-04-22
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.13.2-SNAPSHOT
                          <span class="divider">|</span>
                      </li>
                                      <li class="">
                    <a href="index.html" title="EHRI Backend">
        EHRI Backend</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Using the Web Service</li>
                
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Developer Notes</li>
                              
      <li>
  
                          <a href="install.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                
      <li>
  
                          <a href="deployment.html" title="Deployment">
          <i class="none"></i>
        Deployment</a>
            </li>
                
      <li>
  
                          <a href="import.html" title="Importing Data">
          <i class="none"></i>
        Importing Data</a>
            </li>
                
      <li>
  
                          <a href="gotchas.html" title="Gotchas">
          <i class="none"></i>
        Gotchas</a>
            </li>
                
      <li>
  
                          <a href="migrations.html" title="DB Migration History">
          <i class="none"></i>
        DB Migration History</a>
            </li>
                
      <li>
  
                          <a href="scripting.html" title="Scripting">
          <i class="none"></i>
        Scripting</a>
            </li>
                
      <li>
  
                          <a href="permissions.html" title="Permissions">
          <i class="none"></i>
        Permissions</a>
            </li>
                
      <li>
  
                          <a href="serialization.html" title="Data Serialization Config">
          <i class="none"></i>
        Data Serialization Config</a>
            </li>
                
      <li>
  
                          <a href="validation.html" title="Validation">
          <i class="none"></i>
        Validation</a>
            </li>
                
      <li>
  
                          <a href="identifiers.html" title="Identifiers">
          <i class="none"></i>
        Identifiers</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Web Service Usage</a>
          </li>
                
      <li>
  
                          <a href="loaddump.html" title="Dumping and Loading JSON backups">
          <i class="none"></i>
        Dumping and Loading JSON backups</a>
            </li>
                              <li class="nav-header">Modules</li>
                              
      <li>
  
                          <a href="ehri-definitions/index.html" title="Data Definitions">
          <i class="none"></i>
        Data Definitions</a>
            </li>
                
      <li>
  
                          <a href="ehri-core/index.html" title="Core Java API">
          <i class="none"></i>
        Core Java API</a>
            </li>
                
      <li>
  
                          <a href="ehri-ws/index.html" title="Web Service">
          <i class="none"></i>
        Web Service</a>
            </li>
                
      <li>
  
                          <a href="ehri-io/index.html" title="Import Tools">
          <i class="none"></i>
        Import Tools</a>
            </li>
                
      <li>
  
                          <a href="ehri-cli/index.html" title="Command Line Utilities">
          <i class="none"></i>
        Command Line Utilities</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                            
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
                              <li class="nav-header">API Docs</li>
                              
      <li>
  
                          <a href="apidocs/index.html" title="Javadocs">
          <i class="none"></i>
        Javadocs</a>
            </li>
                              <li class="nav-header">Web Service Docs</li>
                              
      <li>
  
                          <a href="ehri-ws/wsdocs/index.html" title="Web API">
          <i class="none"></i>
        Web API</a>
            </li>
                                    
      <li>
  
                          <a href="samples.tgz" title="Import Data Samples">
          <i class="none"></i>
        Import Data Samples</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Using the Web Service</h1>
<p>This will be a general walk-through of how to use the web service to create, import, and fetch data. First, initialise a new Neo4j database as described in the <a href="initialise.html">initialisation instructions</a>. Now, restart the Neo4j server like do:</p>

<div class="source">
<div class="source">
<pre>$NEO4J_HOME/bin/neo4j start
</pre></div></div>
<p>Verify that everything&#x2019;s working by fetching your user profile using the following Curl command (for these examples I&#x2019;ll be using my own <tt>$USER</tt>, which is <tt>mike</tt>):</p>

<div class="source">
<div class="source">
<pre>curl http://localhost:7474/ehri/classes/UserProfile/mike
</pre></div></div>
<p>If all goes well you should see something like:</p>

<div class="source">
<div class="source">
<pre>{
  &quot;id&quot; : &quot;mike&quot;,
  &quot;type&quot; : &quot;UserProfile&quot;,
  &quot;data&quot; : {
    &quot;identifier&quot; : &quot;mike&quot;,
    &quot;name&quot; : &quot;Mike Bryant&quot;
  },
  &quot;meta&quot; : {
    &quot;gid&quot; : 22
  },
  &quot;relationships&quot; : {
    &quot;lifecycleEvent&quot; : [ {
      &quot;relationships&quot; : {
        &quot;hasActioner&quot; : [ {
          &quot;relationships&quot; : { },
          &quot;data&quot; : {
            &quot;identifier&quot; : &quot;admin&quot;,
            &quot;name&quot; : &quot;Admin&quot;
          },
          &quot;meta&quot; : {
            &quot;followers&quot; : 0,
            &quot;watching&quot; : 0,
            &quot;following&quot; : 0
          },
          &quot;id&quot; : &quot;admin&quot;,
          &quot;type&quot; : &quot;Group&quot;
        } ]
      },
      &quot;data&quot; : {
        &quot;eventType&quot; : &quot;creation&quot;,
        &quot;timestamp&quot; : &quot;2015-10-01T15:06:38.411+01:00&quot;
      },
      &quot;meta&quot; : {
        &quot;childCount&quot; : 1
      },
      &quot;id&quot; : &quot;a2035f24-6845-11e5-92aa-ed4cb7d1dda8&quot;,
      &quot;type&quot; : &quot;SystemEvent&quot;
    } ],
    &quot;belongsTo&quot; : [ {
      &quot;relationships&quot; : { },
      &quot;data&quot; : {
        &quot;identifier&quot; : &quot;admin&quot;,
        &quot;name&quot; : &quot;Administrators&quot;
      },
      &quot;meta&quot; : {
        &quot;childCount&quot; : 1
      },
      &quot;id&quot; : &quot;admin&quot;,
      &quot;type&quot; : &quot;Group&quot;
    } ]
  }
}
</pre></div></div>
<p>This JSON data is a type of graph. It says that:</p>

<ul>
  
<li>The user profile has global ID <tt>mike</tt>, which is the same as the local (non-hierarchical) identifier <tt>mike</tt></li>
  
<li>The profile is of type <tt>UserProfile</tt></li>
  
<li>It has a <tt>belongsTo</tt> relationship to a <tt>Group</tt> item with ID <tt>admin</tt></li>
  
<li>There was a <tt>SystemEvent</tt> of type <tt>creation</tt>, &#x201c;actioned&#x201d; (or initiated) by <tt>admin</tt>.</li>
</ul>
<p>Assuming that worked, lets go on and create the following:</p>

<ol style="list-style-type: decimal">
  
<li>a <tt>Country</tt> item (via the web service RESTful API)</li>
  
<li>a <tt>Repository</tt> item via <a class="externalLink" href="http://www.apex-project.eu/index.php/en/outcomes/standards/eag-2012">EAG</a> XML import  .de/) XML import)</li>
  
<li>a <tt>DocumentaryUnit</tt> item via <a class="externalLink" href="http://www.loc.gov/ead/">EAD</a> XML import</li>
</ol>
<p>Items 1, 2, and 3 here have a hierarchical relationship, which means that we need to create them in order, since the documentary unit item will &#x201c;belong&#x201d; to the repository, and the repository to the country item.</p>
<div class="section">
<h2><a name="Web_service_usage_conventions"></a>Web service usage conventions</h2>
<p>Before we start, lets just explain a couple of conventions for using the web service. You&#x2019;ll notice below that any requests that <i>change</i> data, e.g. <tt>POST</tt>, <tt>PUT</tt>, <tt>DELETE</tt> methods, require an <tt>X-User: $USER</tt> header. This identifier the &#x201c;actioner&#x201d; to the system and allows the permission system to determine if they have adequate permissions (obviously, it&#x2019;s the responsibility of the client application to verify people are who they say they are, but the web service does not handle authentication, only authorisation.)</p>
<p>We also use the <tt>X-LogMessage</tt> header when we want to tell the system what we&#x2019;re doing. This will end up as the  <tt>logMessage</tt> property on the <tt>SystemEvent</tt> item associated with the change.</p></div>
<div class="section">
<h2><a name="Creating_the_country"></a>Creating the country</h2>
<p>We&#x2019;re going to create the country via the &#x201c;RESTful&#x201d; web service API. The only data we absolutely need for the country item is an ISO-3166-1 alpha-2 (2 letter) code. For now we&#x2019;ll use <tt>nl</tt>, for the Netherlands.</p>
<p>We need to send JSON data to the web service and it needs to be in a particular format, namely an object with the following data members:</p>

<ul>
  
<li>a <tt>type</tt> property for the &#x201c;content type&#x201d; of the new item</li>
  
<li>a <tt>data</tt> object property, containing at least the item&#x2019;s mandatory properties</li>
  
<li>an optional <tt>relationships</tt> object attribute, for nested data members</li>
</ul>
<p>For a country, we just need <tt>type</tt>, and <tt>data</tt>, and the only attribute that needs to be present in <tt>data</tt> is the <tt>identifier</tt> property containing our two-letter code. So the JSON data we&#x2019;ll send looks like this:</p>

<div class="source">
<div class="source">
<pre>{
  &quot;type&quot;: &quot;Country&quot;,
  &quot;data&quot;: {
    &quot;identifier&quot;: &quot;nl&quot;
  }
}
</pre></div></div>
<p>Let&#x2019;s send that via CURL to the <tt>/ehri/classes/Country</tt> endpoint, using <tt>application/json</tt> as the content type:</p>

<div class="source">
<div class="source">
<pre>curl -X POST \
     -H &quot;X-User: mike&quot; \
     -H &quot;Content-type: application/json&quot; \
     --data '{&quot;type&quot;: &quot;Country&quot;, &quot;data&quot;: {&quot;identifier&quot;: &quot;nl&quot;}}' \
     http://localhost:7474/ehri/Country
</pre></div></div>
<p>We should recieve the newly-create item as the response, with more system-created metadata:</p>

<div class="source">
<div class="source">
<pre>{
  &quot;id&quot; : &quot;nl&quot;,
  &quot;data&quot; : {
    &quot;identifier&quot; : &quot;nl&quot;
  },
  &quot;type&quot; : &quot;Country&quot;,
  &quot;relationships&quot; : {
    &quot;lifecycleEvent&quot; : [ {
      &quot;id&quot; : &quot;1faabf00-6903-11e5-a63f-d32c8c516fe2&quot;,
      &quot;data&quot; : {
        &quot;timestamp&quot; : &quot;2015-10-02T13:43:04.105+01:00&quot;,
        &quot;eventType&quot; : &quot;creation&quot;
      },
      &quot;type&quot; : &quot;SystemEvent&quot;,
      &quot;relationships&quot; : {
        &quot;hasActioner&quot; : [ {
          &quot;id&quot; : &quot;mike&quot;,
          &quot;data&quot; : {
            &quot;name&quot; : &quot;mike&quot;,
            &quot;identifier&quot; : &quot;mike&quot;
          },
          &quot;type&quot; : &quot;UserProfile&quot;,
          &quot;relationships&quot; : { },
          &quot;meta&quot; : {
            &quot;following&quot; : 0,
            &quot;followers&quot; : 0,
            &quot;watching&quot; : 0
          }
        } ]
      },
      &quot;meta&quot; : {
        &quot;childCount&quot; : 1
      }
    } ]
  },
  &quot;meta&quot; : {
    &quot;childCount&quot; : 0,
    &quot;gid&quot; : 26
  }
}
</pre></div></div>
<p>A few things to note:</p>

<ul>
  
<li>the system-defined global ID is the same as the local identifier property we provided, since countries  are top-level items</li>
  
<li>there&#x2019;s a <tt>creation</tt> event, actioned by us</li>
</ul>
<p>Since the global ID is <tt>nl</tt>, we can fetch the item from the web service specifically using:</p>

<div class="source">
<div class="source">
<pre>curl http://localhost:7474/ehri/classes/Country/nl
</pre></div></div>
<p>This should give the same result as when we created it.</p></div>
<div class="section">
<h2><a name="Importing_a_repository_via_EAG"></a>Importing a repository via EAG</h2>
<p>Now we&#x2019;re going to create a repository inside our new country. Since repositories require somewhat more metadata to be useful, we&#x2019;re going to import it via an EAG file. Download and extract the sample EAC, EAD, and EAG XML documents from the <a href="samples.tgz">samples.tgz</a> archive.</p>
<p>To import <tt>eag.xml</tt> we&#x2019;re going to use the <tt>/ehri/import/eag</tt> web service method like so:</p>

<div class="source">
<div class="source">
<pre>curl    -X POST \
        -H &quot;X-User: mike&quot; \
        -H &quot;X-LogMessage: Testing EAG import&quot; \
        -H &quot;Content-type: text/xml&quot; \
        --data @eag.xml \
        http://localhost:7474/ehri/import/eag?scope=nl
</pre></div></div>
<p>We should receive a response like so:</p>

<div class="source">
<div class="source">
<pre>{&quot;message&quot;:&quot;Testing EAG import&quot;,&quot;updated&quot;:0,&quot;created&quot;:1,&quot;unchanged&quot;:0}
</pre></div></div>
<p>This tells us that we created one new item, as expected. The import endpoint is <a class="externalLink" href="https://en.wikipedia.org/wiki/Idempotence">idempotent</a> so we can run the same thing again and it&#x2019;ll tell us that there were no changes.</p>

<div class="source">
<div class="source">
<pre>{&quot;message&quot;:&quot;Testing EAG import&quot;,&quot;updated&quot;:0,&quot;created&quot;:0,&quot;unchanged&quot;:1}
</pre></div></div>
<p>Unfortunately, the import methods don&#x2019;t tell us much about the actual items we&#x2019;ve just created, so lets list all the repositories and see what we see there:</p>

<div class="source">
<div class="source">
<pre>curl http://localhost:7474/ehri/classes/Repository
</pre></div></div>
<p>This gives us the somewhat more extensive data:</p>

<div class="source">
<div class="source">
<pre>[
    {
        &quot;data&quot;: {
            &quot;identifier&quot;: &quot;test-repository&quot;,
            &quot;typeOfEntity&quot;: &quot;organisation&quot;
        },
        &quot;id&quot;: &quot;nl-test_repository&quot;,
        &quot;meta&quot;: {
            &quot;childCount&quot;: 0,
            &quot;gid&quot;: 30,
            &quot;watchedBy&quot;: 0
        },
        &quot;relationships&quot;: {
            &quot;describes&quot;: [
                {
                    &quot;data&quot;: {
                        &quot;accessibility&quot;: &quot;Use public transport&quot;,
                        &quot;creationProcess&quot;: &quot;IMPORT&quot;,
                        &quot;history&quot;: &quot;Example Repository Description&quot;,
                        &quot;holdings&quot;: &quot;Large&quot;,
                        &quot;identifier&quot;: &quot;test-repository#desc&quot;,
                        &quot;languageCode&quot;: &quot;eng&quot;,
                        &quot;name&quot;: &quot;Test Repository&quot;,
                        &quot;openingTimes&quot;: &quot;9-5 All week&quot;,
                        &quot;otherFormsOfName&quot;: &quot;Test Repository - Alt Name&quot;,
                        &quot;rulesAndConventions&quot;: &quot;ISDIAH&quot;,
                        &quot;typeOfEntity&quot;: &quot;organisation&quot;
                    },
                    &quot;id&quot;: &quot;nl-test_repository.eng-test_repository_desc&quot;,
                    &quot;meta&quot;: {
                        &quot;gid&quot;: 31
                    },
                    &quot;relationships&quot;: {
                        &quot;hasAddress&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;countryCode&quot;: &quot;NL&quot;,
                                    &quot;email&quot;: &quot;info@example.com&quot;,
                                    &quot;municipality&quot;: &quot;A Town&quot;,
                                    &quot;postalCode&quot;: &quot;ABC 123&quot;,
                                    &quot;street&quot;: &quot;Any Street&quot;,
                                    &quot;telephone&quot;: &quot;12345 678910&quot;,
                                    &quot;webpage&quot;: &quot;www.example.com&quot;
                                },
                                &quot;id&quot;: &quot;3320f8ec-6905-11e5-accc-dd70c2facf88&quot;,
                                &quot;meta&quot;: {
                                    &quot;gid&quot;: 33
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;Address&quot;
                            }
                        ],
                        &quot;hasUnknownProperty&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;eag_archguide_desc_email_&quot;: &quot;Email&quot;,
                                    &quot;eag_archguide_desc_webpage_&quot;: &quot;Website&quot;,
                                    &quot;eag_archguide_identity_repositorid_&quot;: &quot;test&quot;
                                },
                                &quot;id&quot;: &quot;3320f8ee-6905-11e5-accc-dd70c2facf88&quot;,
                                &quot;meta&quot;: {
                                    &quot;gid&quot;: 32
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;UnknownProperty&quot;
                            }
                        ]
                    },
                    &quot;type&quot;: &quot;RepositoryDescription&quot;
                }
            ],
            &quot;hasCountry&quot;: [
                {
                    &quot;data&quot;: {
                        &quot;identifier&quot;: &quot;nl&quot;
                    },
                    &quot;id&quot;: &quot;nl&quot;,
                    &quot;meta&quot;: {
                        &quot;childCount&quot;: 1
                    },
                    &quot;relationships&quot;: {},
                    &quot;type&quot;: &quot;Country&quot;
                }
            ],
            &quot;lifecycleEvent&quot;: [
                {
                    &quot;data&quot;: {
                        &quot;eventType&quot;: &quot;ingest&quot;,
                        &quot;timestamp&quot;: &quot;2015-10-02T13:57:55.686+01:00&quot;
                    },
                    &quot;id&quot;: &quot;334e98a2-6905-11e5-accc-dd70c2facf88&quot;,
                    &quot;meta&quot;: {
                        &quot;childCount&quot;: 1
                    },
                    &quot;relationships&quot;: {
                        &quot;hasActioner&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;identifier&quot;: &quot;mike&quot;,
                                    &quot;name&quot;: &quot;mike&quot;
                                },
                                &quot;id&quot;: &quot;mike&quot;,
                                &quot;meta&quot;: {
                                    &quot;followers&quot;: 0,
                                    &quot;following&quot;: 0,
                                    &quot;watching&quot;: 0
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;UserProfile&quot;
                            }
                        ]
                    },
                    &quot;type&quot;: &quot;SystemEvent&quot;
                }
            ]
        },
        &quot;type&quot;: &quot;Repository&quot;
    }
]
</pre></div></div>
<p>We have a JSON list with one item (as expected, since we&#x2019;ve only created one repository). A few things to note:</p>

<ul>
  
<li>this time the <tt>lifecycleEvent</tt> is <tt>ingest</tt>, again with <tt>hasActioner</tt> &#x201c;mike&#x201d;.</li>
  
<li>there is a <tt>hasCountry</tt> relationship pointing to our <tt>nl</tt> country</li>
  
<li>there is a <tt>describes</tt> relationship to a <tt>RepositoryDescription</tt> item with (default)  <tt>languageCode</tt> value <tt>eng</tt>, that contains the bulk of the data in our EAG file.</li>
  
<li>the system ID is <tt>nl-test_repository</tt>, and the identifier value is <tt>test_repository</tt>.</li>
</ul>
<p>We can fetch the item directly using its ID via:</p>

<div class="source">
<div class="source">
<pre>curl http://localhost:7474/ehri/classes/Repository/nl-test_repository
</pre></div></div></div>
<div class="section">
<h2><a name="Importing_a_documentary_unit_via_EAD"></a>Importing a documentary unit via EAD</h2>
<p>Importing EAD is much the same process, only this time we use the <tt>/ehri/import/ead</tt> method and the repository (with ID <tt>nl-test_repository</tt>) is the <tt>scope</tt> item that we are importing into:</p>

<div class="source">
<div class="source">
<pre>curl    -X POST \
        -H &quot;X-User: mike&quot; \
        -H &quot;X-LogMessage: Testing EAD import&quot; \
        -H &quot;Content-type: text/xml&quot; \
        --data @ead.xml \
        http://localhost:7474/ehri/import/ead?scope=nl-test_repository
</pre></div></div>
<p>Run this and again we get an import log like so:</p>

<div class="source">
<div class="source">
<pre>{&quot;message&quot;:&quot;Testing EAD import&quot;,&quot;updated&quot;:0,&quot;created&quot;:1,&quot;unchanged&quot;:0}
</pre></div></div>
<p>Running <tt>GET</tt> on the <tt>/ehri/classes/DocumentaryUnit</tt> method lists the units in the system, giving us this rather verbose output:</p>

<div class="source">
<div class="source">
<pre>[
    {
        &quot;data&quot;: {
            &quot;identifier&quot;: &quot;test-doc&quot;
        },
        &quot;id&quot;: &quot;nl-test_repository-test_doc&quot;,
        &quot;meta&quot;: {
            &quot;childCount&quot;: 0,
            &quot;gid&quot;: 37,
            &quot;watchedBy&quot;: 0
        },
        &quot;relationships&quot;: {
            &quot;describes&quot;: [
                {
                    &quot;data&quot;: {
                        &quot;creationProcess&quot;: &quot;IMPORT&quot;,
                        &quot;extentAndMedium&quot;: &quot;167 files&quot;,
                        &quot;languageCode&quot;: &quot;eng&quot;,
                        &quot;languageOfMaterial&quot;: [
                            &quot;eng&quot;,
                            &quot;fra&quot;,
                            &quot;deu&quot;,
                            &quot;heb&quot;,
                            &quot;ron&quot;,
                            &quot;yid&quot;
                        ],
                        &quot;levelOfDescription&quot;: &quot;collection&quot;,
                        &quot;name&quot;: &quot;Test EAD Item&quot;,
                        &quot;scopeAndContent&quot;: &quot;This is some test scope and content.&quot;,
                        &quot;sourceFileId&quot;: &quot;C00001#ENG&quot;
                    },
                    &quot;id&quot;: &quot;nl-test_repository-test_doc.eng&quot;,
                    &quot;meta&quot;: {
                        &quot;gid&quot;: 38
                    },
                    &quot;relationships&quot;: {
                        &quot;hasDate&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;description&quot;: &quot;1924-1-1 - 1947-12-31&quot;,
                                    &quot;endDate&quot;: &quot;1947-12-31&quot;,
                                    &quot;startDate&quot;: &quot;1924-01-01&quot;
                                },
                                &quot;id&quot;: &quot;de1f5c77-6908-11e5-8ffa-0da85690eef2&quot;,
                                &quot;meta&quot;: {
                                    &quot;gid&quot;: 42
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;DatePeriod&quot;
                            },
                            {
                                &quot;data&quot;: {
                                    &quot;description&quot;: &quot;1943-1-1&quot;,
                                    &quot;endDate&quot;: &quot;1943-01-31&quot;,
                                    &quot;startDate&quot;: &quot;1943-01-01&quot;
                                },
                                &quot;id&quot;: &quot;de1f5c79-6908-11e5-8ffa-0da85690eef2&quot;,
                                &quot;meta&quot;: {
                                    &quot;gid&quot;: 43
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;DatePeriod&quot;
                            }
                        ],
                        &quot;hasUnknownProperty&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;ead_archdesc_did_langmaterial_language_&quot;: [
                                        &quot;English&quot;,
                                        &quot;French&quot;,
                                        &quot;German&quot;,
                                        &quot;Hebrew&quot;,
                                        &quot;Romanian&quot;,
                                        &quot;Yiddish&quot;
                                    ],
                                    &quot;ead_archdesc_did_repository_address_addressline_&quot;: [
                                        &quot;Test Address 1&quot;,
                                        &quot;Test Address 2&quot;
                                    ],
                                    &quot;ead_archdesc_did_repository_corpname_&quot;: &quot;Test Corportate Body&quot;
                                },
                                &quot;id&quot;: &quot;de1f5c75-6908-11e5-8ffa-0da85690eef2&quot;,
                                &quot;meta&quot;: {
                                    &quot;gid&quot;: 41
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;UnknownProperty&quot;
                            }
                        ],
                        &quot;relatesTo&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;name&quot;: &quot;Test Name&quot;,
                                    &quot;type&quot;: &quot;creatorAccess&quot;
                                },
                                &quot;id&quot;: &quot;de1f5c73-6908-11e5-8ffa-0da85690eef2&quot;,
                                &quot;meta&quot;: {
                                    &quot;gid&quot;: 40
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;AccessPoint&quot;
                            },
                            {
                                &quot;data&quot;: {
                                    &quot;name&quot;: &quot;Test Corporate Body&quot;,
                                    &quot;type&quot;: &quot;subjectAccess&quot;
                                },
                                &quot;id&quot;: &quot;de1f5c71-6908-11e5-8ffa-0da85690eef2&quot;,
                                &quot;meta&quot;: {
                                    &quot;gid&quot;: 39
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;AccessPoint&quot;
                            }
                        ]
                    },
                    &quot;type&quot;: &quot;DocumentaryUnitDescription&quot;
                }
            ],
            &quot;heldBy&quot;: [
                {
                    &quot;data&quot;: {
                        &quot;identifier&quot;: &quot;test-repository&quot;
                    },
                    &quot;id&quot;: &quot;nl-test_repository&quot;,
                    &quot;meta&quot;: {
                        &quot;childCount&quot;: 1,
                        &quot;watchedBy&quot;: 0
                    },
                    &quot;relationships&quot;: {
                        &quot;describes&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;languageCode&quot;: &quot;eng&quot;,
                                    &quot;name&quot;: &quot;Test Repository&quot;
                                },
                                &quot;id&quot;: &quot;nl-test_repository.eng-test_repository_desc&quot;,
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;RepositoryDescription&quot;
                            }
                        ],
                        &quot;hasCountry&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;identifier&quot;: &quot;nl&quot;
                                },
                                &quot;id&quot;: &quot;nl&quot;,
                                &quot;meta&quot;: {
                                    &quot;childCount&quot;: 1
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;Country&quot;
                            }
                        ]
                    },
                    &quot;type&quot;: &quot;Repository&quot;
                }
            ],
            &quot;lifecycleEvent&quot;: [
                {
                    &quot;data&quot;: {
                        &quot;eventType&quot;: &quot;ingest&quot;,
                        &quot;timestamp&quot;: &quot;2015-10-02T14:24:11.166+01:00&quot;
                    },
                    &quot;id&quot;: &quot;de2db45d-6908-11e5-8ffa-0da85690eef2&quot;,
                    &quot;meta&quot;: {
                        &quot;childCount&quot;: 1
                    },
                    &quot;relationships&quot;: {
                        &quot;hasActioner&quot;: [
                            {
                                &quot;data&quot;: {
                                    &quot;identifier&quot;: &quot;mike&quot;,
                                    &quot;name&quot;: &quot;mike&quot;
                                },
                                &quot;id&quot;: &quot;mike&quot;,
                                &quot;meta&quot;: {
                                    &quot;followers&quot;: 0,
                                    &quot;following&quot;: 0,
                                    &quot;watching&quot;: 0
                                },
                                &quot;relationships&quot;: {},
                                &quot;type&quot;: &quot;UserProfile&quot;
                            }
                        ]
                    },
                    &quot;type&quot;: &quot;SystemEvent&quot;
                }
            ]
        },
        &quot;type&quot;: &quot;DocumentaryUnit&quot;
    }
]
</pre></div></div>
<p>Again, stuff to note:</p>

<ul>
  
<li>the generated ID is <tt>nl-test_repository-test_doc</tt>, while the identifier property is <tt>test-doc</tt></li>
  
<li>the repository is present in the <tt>heldBy</tt> relationship</li>
</ul></div>
<div class="section">
<h2><a name="Additional_import_options"></a>Additional import options</h2>
<p>In these examples we POSTed a single XML file (with content-type <tt>text/xml</tt>) to the import methods. This is convenient for single files, but often you want to import multiple XML files at once into the same country, repository, or documentary unit (as child items.) In this case it is possible to create zip or tar archives containing those files and POST the data as content type <tt>application/octet-stream</tt>. </p>
<p>Another (less good) alternative when the web service server is local is to POST a file containing a list (one entry per line) of local file paths with content-type <tt>text/plain</tt></p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2016
                        <a href="http://ehri-project.eu">The European Holocaust Research Infrastructure (EHRI)</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
